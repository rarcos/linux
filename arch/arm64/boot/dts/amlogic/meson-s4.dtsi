// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright (c) 2021 Amlogic, Inc. All rights reserved.
 */

#include <dt-bindings/interrupt-controller/irq.h>
#include <dt-bindings/interrupt-controller/arm-gic.h>
#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/gpio/meson-s4-gpio.h>
#include <dt-bindings/clock/amlogic,s4-pll-clkc.h>
#include <dt-bindings/clock/amlogic,s4-peripherals-clkc.h>
#include <dt-bindings/reset/amlogic,meson-s4-reset.h>
#include <dt-bindings/power/meson-s4-power.h>
#include <dt-bindings/reset/amlogic,meson-s4-reset.h>
#include <dt-bindings/clock/axg-audio-clkc.h>
#include <dt-bindings/reset/amlogic,meson-axg-audio-arb.h>
#include <dt-bindings/reset/amlogic,meson-g12a-audio-reset.h>
#include <dt-bindings/sound/meson-g12a-toacodec.h>
#include <dt-bindings/sound/meson-g12a-tohdmitx.h>
/ {
	cpus {
		#address-cells = <2>;
		#size-cells = <0>;

		cpu0: cpu@0 {
			device_type = "cpu";
			compatible = "arm,cortex-a35";
			reg = <0x0 0x0>;
			enable-method = "psci";
		};

		cpu1: cpu@1 {
			device_type = "cpu";
			compatible = "arm,cortex-a35";
			reg = <0x0 0x1>;
			enable-method = "psci";
		};

		cpu2: cpu@2 {
			device_type = "cpu";
			compatible = "arm,cortex-a35";
			reg = <0x0 0x2>;
			enable-method = "psci";
		};

		cpu3: cpu@3 {
			device_type = "cpu";
			compatible = "arm,cortex-a35";
			reg = <0x0 0x3>;
			enable-method = "psci";
		};
	};

	tdmif_a: audio-controller-0 {
		compatible = "amlogic,axg-tdm-iface";
		#sound-dai-cells = <0>;
		sound-name-prefix = "TDM_A";
		clocks = <&clkc_audio AUD_CLKID_MST_A_SCLK>,
			 <&clkc_audio AUD_CLKID_MST_A_LRCLK>,
			 <&clkc_audio AUD_CLKID_MST_A_MCLK>;
		clock-names = "sclk", "lrclk","mclk";
	};

	tdmif_b: audio-controller-1 {
		compatible = "amlogic,axg-tdm-iface";
		#sound-dai-cells = <0>;
		sound-name-prefix = "TDM_B";
		clocks = <&clkc_audio AUD_CLKID_MST_A_SCLK>,
			 <&clkc_audio AUD_CLKID_MST_B_LRCLK>,
			 <&clkc_audio AUD_CLKID_MST_B_MCLK>;
		clock-names = "sclk", "lrclk","mclk";
	};

	tdmif_c: audio-controller-2 {
		compatible = "amlogic,axg-tdm-iface";
		#sound-dai-cells = <0>;
		sound-name-prefix = "TDM_C";
		clocks = <&clkc_audio AUD_CLKID_MST_C_SCLK>,
			 <&clkc_audio AUD_CLKID_MST_C_LRCLK>,
			 <&clkc_audio AUD_CLKID_MST_C_MCLK>;
		clock-names = "sclk", "lrclk","mclk";
	};

	timer {
		compatible = "arm,armv8-timer";
		interrupts = <GIC_PPI 13 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
			     <GIC_PPI 14 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
			     <GIC_PPI 11 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
			     <GIC_PPI 10 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>;
	};

	psci {
		compatible = "arm,psci-1.0";
		method = "smc";
	};

	xtal: xtal-clk {
		compatible = "fixed-clock";
		clock-frequency = <24000000>;
		clock-output-names = "xtal";
		#clock-cells = <0>;
	};

	firmware {
		sm: secure-monitor {
			compatible = "amlogic,meson-gxbb-sm";

			pwrc: power-controller {
				compatible = "amlogic,meson-s4-pwrc";
				#power-domain-cells = <1>;
			};
		};
	};

	soc {
		compatible = "simple-bus";
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		gic: interrupt-controller@fff01000 {
			compatible = "arm,gic-400";
			#interrupt-cells = <3>;
			#address-cells = <0>;
			interrupt-controller;
			reg = <0x0 0xfff01000 0 0x1000>,
			      <0x0 0xfff02000 0 0x2000>,
			      <0x0 0xfff04000 0 0x2000>,
			      <0x0 0xfff06000 0 0x2000>;
			interrupts = <GIC_PPI 9 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_HIGH)>;
		};

		apb4: bus@fe000000 {
			compatible = "simple-bus";
			reg = <0x0 0xfe000000 0x0 0x480000>;
			#address-cells = <2>;
			#size-cells = <2>;
			ranges = <0x0 0x0 0x0 0xfe000000 0x0 0x480000>;

			dmc: bus@36000 {
				compatible = "simple-bus";
				#address-cells = <2>;
				#size-cells = <2>;
				ranges = <0x0 0x0 0x0 0x36000 0x0 0x2000>;

				canvas: video-lut@48 {
					compatible = "amlogic,canvas";
					reg = <0x0 0x48 0x0 0x14>;
				};
			};

			hdmi_tx: hdmi-tx@300000 {
				compatible = "amlogic,meson-s4-dw-hdmi";
				reg = <0x0 0x300000 0x0 0x10000>;
				interrupts = <GIC_SPI 204 IRQ_TYPE_EDGE_RISING>;
				resets = <&reset RESET_HDMITX_APB>,
					 <&reset RESET_HDMITXPHY>,
					 <&reset RESET_HDMI_TX>;
				reset-names = "hdmitx_apb", "hdmitx", "hdmitx_phy";
				clocks = <&clkc_periphs CLKID_HDMI>,
					 <&clkc_periphs CLKID_HDMITX_APB>,
					 <&clkc_periphs CLKID_VPU_INTR>;
				clock-names = "isfr", "iahb", "venci";
				#address-cells = <1>;
				#size-cells = <0>;
				#sound-dai-cells = <0>;
				status = "disabled";

				/* VPU VENC Input */
				hdmi_tx_venc_port: port@0 {
					reg = <0>;

					hdmi_tx_in: endpoint {
						remote-endpoint = <&hdmi_tx_out>;
					};
				};

				/* TMDS Output */
				hdmi_tx_tmds_port: port@1 {
					reg = <1>;
				};
			};

			clkc_periphs: clock-controller@0 {
				compatible = "amlogic,s4-peripherals-clkc";
				reg = <0x0 0x0 0x0 0x49c>;
				clocks = <&clkc_pll CLKID_FCLK_DIV2>,
					<&clkc_pll CLKID_FCLK_DIV2P5>,
					<&clkc_pll CLKID_FCLK_DIV3>,
					<&clkc_pll CLKID_FCLK_DIV4>,
					<&clkc_pll CLKID_FCLK_DIV5>,
					<&clkc_pll CLKID_FCLK_DIV7>,
					<&clkc_pll CLKID_HIFI_PLL>,
					<&clkc_pll CLKID_GP0_PLL>,
					<&clkc_pll CLKID_MPLL0>,
					<&clkc_pll CLKID_MPLL1>,
					<&clkc_pll CLKID_MPLL2>,
					<&clkc_pll CLKID_MPLL3>,
					<&clkc_pll CLKID_HDMI_PLL>,
					<&xtal>;
				clock-names = "fclk_div2", "fclk_div2p5", "fclk_div3",
						"fclk_div4", "fclk_div5", "fclk_div7",
						"hifi_pll", "gp0_pll", "mpll0", "mpll1",
						"mpll2", "mpll3", "hdmi_pll", "xtal";
				#clock-cells = <1>;
			};

			clkc_pll: clock-controller@8000 {
				compatible = "amlogic,s4-pll-clkc";
				reg = <0x0 0x8000 0x0 0x1e8>;
				clocks = <&xtal>;
				clock-names = "xtal";
				#clock-cells = <1>;
			};

			acodec: audio-controller@1a000 {
				compatible = "amlogic,t9015";
				reg = <0x0 0x1A000 0x0 0x14>;
				#sound-dai-cells = <0>;
				sound-name-prefix = "ACODEC";
				clocks = <&clkc_periphs CLKID_ACODEC>;
				clock-names = "pclk";
				resets = <&reset RESET_ACODEC>;
				AVDD-supply = <&vddio_ao1v8>;
			};

			watchdog@2100 {
				compatible = "amlogic,s4-wdt", "amlogic,t7-wdt";
				reg = <0x0 0x2100 0x0 0x10>;
				clocks = <&xtal>;
			};

			periphs_pinctrl: pinctrl@4000 {
				compatible = "amlogic,meson-s4-periphs-pinctrl";
				#address-cells = <2>;
				#size-cells = <2>;
				ranges;

				gpio: bank@4000 {
					reg = <0x0 0x4000 0x0 0x004c>,
					      <0x0 0x40c0 0x0 0x0220>;
					reg-names = "mux", "gpio";
					gpio-controller;
					#gpio-cells = <2>;
					gpio-ranges = <&periphs_pinctrl 0 0 82>;
				};

				remote_pins: remote-pin {
					mux {
						groups = "remote_in";
						function = "remote_in";
						bias-disable;
					};
				};

				i2c0_pins1: i2c0-pins1 {
					mux {
						groups = "i2c0_sda",
						       "i2c0_scl";
						function = "i2c0";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c1_pins1: i2c1-pins1 {
					mux {
						groups = "i2c1_sda_c",
						       "i2c1_scl_c";
						function = "i2c1";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c1_pins2: i2c1-pins2 {
					mux {
						groups = "i2c1_sda_d",
						       "i2c1_scl_d";
						function = "i2c1";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c1_pins3: i2c1-pins3 {
					mux {
						groups = "i2c1_sda_h",
						       "i2c1_scl_h";
						function = "i2c1";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c1_pins4: i2c1-pins4 {
					mux {
						groups = "i2c1_sda_x",
						       "i2c1_scl_x";
						function = "i2c1";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c2_pins1: i2c2-pins1 {
					mux {
						groups = "i2c2_sda_d",
						       "i2c2_scl_d";
						function = "i2c2";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c2_pins2: i2c2-pins2 {
					mux {
						groups = "i2c2_sda_h8",
						       "i2c2_scl_h9";
						function = "i2c2";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c2_pins3: i2c2-pins3 {
					mux {
						groups = "i2c2_sda_h0",
						       "i2c2_scl_h1";
						function = "i2c2";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c3_pins1: i2c3-pins1 {
					mux {
						groups = "i2c3_sda_x",
						       "i2c3_scl_x";
						function = "i2c3";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c3_pins2: i2c3-pins2 {
					mux {
						groups = "i2c3_sda_z",
						       "i2c3_scl_z";
						function = "i2c3";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c4_pins1: i2c4-pins1 {
					mux {
						groups = "i2c4_sda_c",
						       "i2c4_scl_c";
						function = "i2c4";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c4_pins2: i2c4-pins2 {
					mux {
						groups = "i2c4_sda_d",
						       "i2c4_scl_d";
						function = "i2c4";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				i2c4_pins3: i2c4-pins3 {
					mux {
						groups = "i2c4_sda_z",
						       "i2c4_scl_z";
						function = "i2c4";
						drive-strength-microamp = <3000>;
						bias-disable;
					};
				};

				nand_pins: nand-pins {
					mux {
						groups = "emmc_nand_d0",
						       "emmc_nand_d1",
						       "emmc_nand_d2",
						       "emmc_nand_d3",
						       "emmc_nand_d4",
						       "emmc_nand_d5",
						       "emmc_nand_d6",
						       "emmc_nand_d7",
						       "nand_ce0",
						       "nand_ale",
						       "nand_cle",
						       "nand_wen_clk",
						       "nand_ren_wr";
						function = "nand";
						input-enable;
					};
				};

				pwm_a_pins1: pwm-a-pins1 {
					mux {
						groups = "pwm_a_d";
						function = "pwm_a";
					};
				};

				pwm_a_pins2: pwm-a-pins2 {
					mux {
						groups = "pwm_a_x";
						function = "pwm_a";
					};
				};

				pwm_b_pins1: pwm-b-pins1 {
					mux {
						groups = "pwm_b_d";
						function = "pwm_b";
					};
				};

				pwm_b_pins2: pwm-b-pins2 {
					mux {
						groups = "pwm_b_x";
						function = "pwm_b";
					};
				};

				pwm_c_pins1: pwm-c-pins1 {
					mux {
						groups = "pwm_c_d";
						function = "pwm_c";
					};
				};

				pwm_c_pins2: pwm-c-pins2 {
					mux {
						groups = "pwm_c_x";
						function = "pwm_c";
					};
				};

				pwm_d_pins1: pwm-d-pins1 {
					mux {
						groups = "pwm_d_d";
						function = "pwm_d";
					};
				};

				pwm_d_pins2: pwm-d-pins2 {
					mux {
						groups = "pwm_d_h";
						function = "pwm_d";
					};
				};

				pwm_e_pins1: pwm-e-pins1 {
					mux {
						groups = "pwm_e_x";
						function = "pwm_e";
					};
				};

				pwm_e_pins2: pwm-e-pins2 {
					mux {
						groups = "pwm_e_z";
						function = "pwm_e";
					};
				};

				pwm_f_pins1: pwm-f-pins1 {
					mux {
						groups = "pwm_f_x";
						function = "pwm_f";
					};
				};

				pwm_f_pins2: pwm-f-pins2 {
					mux {
						groups = "pwm_f_z";
						function = "pwm_f";
					};
				};

				pwm_g_pins1: pwm-g-pins1 {
					mux {
						groups = "pwm_g_d";
						function = "pwm_g";
					};
				};

				pwm_g_pins2: pwm-g-pins2 {
					mux {
						groups = "pwm_g_z";
						function = "pwm_g";
					};
				};

				pwm_h_pins: pwm-h-pins {
					mux {
						groups = "pwm_h";
						function = "pwm_h";
					};
				};

				pwm_i_pins1: pwm-i-pins1 {
					mux {
						groups = "pwm_i_d";
						function = "pwm_i";
					};
				};

				pwm_i_pins2: pwm-i-pins2 {
					mux {
						groups = "pwm_i_h";
						function = "pwm_i";
					};
				};

				pwm_j_pins: pwm-j-pins {
					mux {
						groups = "pwm_j";
						function = "pwm_j";
					};
				};

				pwm_a_hiz_pins: pwm-a-hiz-pins {
					mux {
						groups = "pwm_a_hiz";
						function = "pwm_a_hiz";
					};
				};

				pwm_b_hiz_pins: pwm-b-hiz-pins {
					mux {
						groups = "pwm_b_hiz";
						function = "pwm_b_hiz";
					};
				};

				pwm_c_hiz_pins: pwm-c-hiz-pins {
					mux {
						groups = "pwm_c_hiz";
						function = "pwm_c_hiz";
					};
				};

				pwm_g_hiz_pins: pwm-g-hiz-pins {
					mux {
						groups = "pwm_g_hiz";
						function = "pwm_g_hiz";
					};
				};

				sdcard_pins: sdcard-pins {
					mux {
						groups = "sdcard_d0_c",
							 "sdcard_d1_c",
							 "sdcard_d2_c",
							 "sdcard_d3_c",
							 "sdcard_clk_c",
							 "sdcard_cmd_c";
						function = "sdcard";
						bias-pull-up;
						drive-strength-microamp = <4000>;
					};
				};

				sdcard_clk_gate_pins: sdcard-clk-gate-pins {
					mux {
						groups = "GPIOC_4";
						function = "gpio_periphs";
						bias-pull-down;
						drive-strength-microamp = <4000>;
					};
				};

				emmc_pins: emmc-pins {
					mux-0 {
						groups = "emmc_nand_d0",
							 "emmc_nand_d1",
							 "emmc_nand_d2",
							 "emmc_nand_d3",
							 "emmc_nand_d4",
							 "emmc_nand_d5",
							 "emmc_nand_d6",
							 "emmc_nand_d7",
							 "emmc_cmd";
						function = "emmc";
						bias-pull-up;
						drive-strength-microamp = <4000>;
					};
					mux-1 {
						groups = "emmc_clk";
						function = "emmc";
						bias-pull-up;
						drive-strength-microamp = <4000>;
					};
				};

				emmc_ds_pins: emmc-ds-pins {
					mux {
						groups = "emmc_nand_ds";
						function = "emmc";
						bias-pull-down;
						drive-strength-microamp = <4000>;
					};
				};

				emmc_clk_gate_pins: emmc-clk-gate-pins {
					mux {
						groups = "GPIOB_8";
						function = "gpio_periphs";
						bias-pull-down;
						drive-strength-microamp = <4000>;
					};
				};

				sdio_pins: sdio-pins {
					mux {
						groups = "sdio_d0",
							 "sdio_d1",
							 "sdio_d2",
							 "sdio_d3",
							 "sdio_clk",
							 "sdio_cmd";
						function = "sdio";
						bias-pull-up;
						drive-strength-microamp = <4000>;
					};
				};

				sdio_clk_gate_pins: sdio-clk-gate-pins {
					mux {
						groups = "GPIOX_4";
						function = "gpio_periphs";
						bias-pull-down;
						drive-strength-microamp = <4000>;
					};
				};

				spicc0_pins_x: spicc0-pins_x {
					mux {
						groups = "spi_a_mosi_x",
						       "spi_a_miso_x",
						       "spi_a_clk_x";
						function = "spi_a";
						drive-strength-microamp = <3000>;
					};
				};

				spicc0_pins_h: spicc0-pins-h {
					mux {
						groups = "spi_a_mosi_h",
						       "spi_a_miso_h",
						       "spi_a_clk_h";
						function = "spi_a";
						drive-strength-microamp = <3000>;
					};
				};

				spicc0_pins_z: spicc0-pins-z {
					mux {
						groups = "spi_a_mosi_z",
						       "spi_a_miso_z",
						       "spi_a_clk_z";
						function = "spi_a";
						drive-strength-microamp = <3000>;
					};
				};

				hdmitx_hpd_pins: hdmitx-hpd {
					mux {
						groups = "hdmitx_hpd_in";
						function = "hdmitx";
						bias-disable;
					};
				};

				hdmitx_ddc_pins: hdmitx-ddc {
					mux {
						groups = "hdmitx_sda",
								"hdmitx_sck";
						function = "hdmitx";
						bias-disable;
						drive-strength-microamp = <4000>;
					};
				};

			};

			gpio_intc: interrupt-controller@4080 {
				compatible = "amlogic,meson-s4-gpio-intc",
					     "amlogic,meson-gpio-intc";
				reg = <0x0 0x4080 0x0 0x20>;
				interrupt-controller;
				#interrupt-cells = <2>;
				amlogic,channel-interrupts =
					<10 11 12 13 14 15 16 17 18 19 20 21>;
			};

			eth_phy: mdio-multiplexer@28000 {
				compatible = "amlogic,g12a-mdio-mux";
				reg = <0x0 0x28000 0x0 0xa4>;

				#address-cells = <1>;
				#size-cells = <0>;
				clocks = <&clkc_periphs CLKID_ETHPHY>,
					 <&xtal>,
					 <&clkc_pll CLKID_MPLL_50M>;
				clock-names = "pclk", "clkin0", "clkin1";
				mdio-parent-bus = <&mdio0>;

				ext_mdio: mdio@0 {
					reg = <0>;
					#address-cells = <1>;
					#size-cells = <0>;
				};

				int_mdio: mdio@1 {
					reg = <1>;
					#address-cells = <1>;
					#size-cells = <0>;

					internal_ephy: ethernet-phy@8 {
						compatible = "ethernet-phy-id0180.3301",
							     "ethernet-phy-ieee802.3-c22";
						interrupts = <GIC_SPI 75 IRQ_TYPE_LEVEL_HIGH>;
						reg = <8>;
						max-speed = <100>;
					};
				};
			};

			clk_msr: clock-measure@48000 {
				compatible = "amlogic,s4-clk-measure";
				reg = <0x0 0x48000 0x0 0x1c>;
			};

			spicc0: spi@50000 {
				compatible = "amlogic,meson-g12a-spicc";
				reg = <0x0 0x50000 0x0 0x44>;
				interrupts = <GIC_SPI 183 IRQ_TYPE_LEVEL_HIGH>;
				clocks = <&clkc_periphs CLKID_SPICC0>,
					 <&clkc_periphs CLKID_SPICC0_EN>;
				clock-names = "core", "pclk";
				#address-cells = <1>;
				#size-cells = <0>;
				status = "disabled";
			};

			pwm_ab: pwm@58000 {
				compatible = "amlogic,meson-s4-pwm";
				reg = <0x0 0x58000 0x0 0x24>;
				clocks = <&clkc_periphs CLKID_PWM_A>,
					 <&clkc_periphs CLKID_PWM_B>;
				#pwm-cells = <3>;
				status = "disabled";
			};

			pwm_cd: pwm@5a000 {
				compatible = "amlogic,meson-s4-pwm";
				reg = <0x0 0x5a000 0x0 0x24>;
				clocks = <&clkc_periphs CLKID_PWM_C>,
					 <&clkc_periphs CLKID_PWM_D>;
				#pwm-cells = <3>;
				status = "disabled";
			};

			pwm_ef: pwm@5c000 {
				compatible = "amlogic,meson-s4-pwm";
				reg = <0x0 0x5c000 0x0 0x24>;
				clocks = <&clkc_periphs CLKID_PWM_E>,
					 <&clkc_periphs CLKID_PWM_F>;
				#pwm-cells = <3>;
				status = "disabled";
			};

			pwm_gh: pwm@5e000 {
				compatible = "amlogic,meson-s4-pwm";
				reg = <0x0 0x5e000 0x0 0x24>;
				clocks = <&clkc_periphs CLKID_PWM_G>,
					 <&clkc_periphs CLKID_PWM_H>;
				#pwm-cells = <3>;
				status = "disabled";
			};

			pwm_ij: pwm@60000 {
				compatible = "amlogic,meson-s4-pwm";
				reg = <0x0 0x60000 0x0 0x24>;
				clocks = <&clkc_periphs CLKID_PWM_I>,
					 <&clkc_periphs CLKID_PWM_J>;
				#pwm-cells = <3>;
				status = "disabled";
			};

			i2c0: i2c@66000 {
				compatible = "amlogic,meson-axg-i2c";
				reg = <0x0 0x66000 0x0 0x20>;
				interrupts = <GIC_SPI 160 IRQ_TYPE_EDGE_RISING>;
				clocks = <&clkc_periphs CLKID_I2C_M_A>;
				#address-cells = <1>;
				#size-cells = <0>;
				status = "disabled";
			};

			i2c1: i2c@68000 {
				compatible = "amlogic,meson-axg-i2c";
				reg = <0x0 0x68000 0x0 0x20>;
				interrupts = <GIC_SPI 161 IRQ_TYPE_EDGE_RISING>;
				clocks = <&clkc_periphs CLKID_I2C_M_B>;
				#address-cells = <1>;
				#size-cells = <0>;
				status = "disabled";
			};

			i2c2: i2c@6a000 {
				compatible = "amlogic,meson-axg-i2c";
				reg = <0x0 0x6a000 0x0 0x20>;
				interrupts = <GIC_SPI 162 IRQ_TYPE_EDGE_RISING>;
				clocks = <&clkc_periphs CLKID_I2C_M_C>;
				#address-cells = <1>;
				#size-cells = <0>;
				status = "disabled";
			};

			i2c3: i2c@6c000 {
				compatible = "amlogic,meson-axg-i2c";
				reg = <0x0 0x6c000 0x0 0x20>;
				interrupts = <GIC_SPI 163 IRQ_TYPE_EDGE_RISING>;
				clocks = <&clkc_periphs CLKID_I2C_M_D>;
				#address-cells = <1>;
				#size-cells = <0>;
				status = "disabled";
			};

			i2c4: i2c@6e000 {
				compatible = "amlogic,meson-axg-i2c";
				reg = <0x0 0x6e000 0x0 0x20>;
				interrupts = <GIC_SPI 164 IRQ_TYPE_EDGE_RISING>;
				clocks = <&clkc_periphs CLKID_I2C_M_E>;
				#address-cells = <1>;
				#size-cells = <0>;
				status = "disabled";
			};

			nand: nand-controller@8c800 {
				compatible = "amlogic,meson-axg-nfc";
				reg = <0x0 0x8c800 0x0 0x100>, <0x0 0x8c000 0x0 0x4>;
				reg-names = "nfc", "emmc";
				interrupts = <GIC_SPI 175 IRQ_TYPE_EDGE_RISING>;
				clocks = <&clkc_periphs CLKID_SD_EMMC_C>,
					<&clkc_pll CLKID_FCLK_DIV2>;
				clock-names = "core", "device";
				status = "disabled";
			};

			uart_b: serial@7a000 {
				compatible = "amlogic,meson-s4-uart",
					     "amlogic,meson-ao-uart";
				reg = <0x0 0x7a000 0x0 0x18>;
				interrupts = <GIC_SPI 169 IRQ_TYPE_EDGE_RISING>;
				clocks = <&xtal>, <&clkc_periphs CLKID_UART_B>, <&xtal>;
				clock-names = "xtal", "pclk", "baud";
				status = "disabled";
			};

			reset: reset-controller@2000 {
				compatible = "amlogic,meson-s4-reset";
				reg = <0x0 0x2000 0x0 0x98>;
				#reset-cells = <1>;
			};

			sec_ao: ao-secure@10220 {
				compatible = "amlogic,s4-ao-secure",
					     "amlogic,meson-gx-ao-secure",
					     "syscon";
				reg = <0x0 0x10220 0x0 0x140>;
				amlogic,has-chip-id;
			};

			ir: ir@84040 {
				compatible = "amlogic,meson-s4-ir";
				reg = <0x0 0x84040 0x0 0x30>;
				interrupts = <GIC_SPI 22 IRQ_TYPE_EDGE_RISING>;
				status = "disabled";
			};

			hwrng: rng@440788 {
				compatible = "amlogic,meson-s4-rng";
				reg = <0x0 0x440788 0x0 0x0c>;
			};
		};

		ethmac: ethernet@fdc00000 {
			compatible = "amlogic,meson-axg-dwmac",
				     "snps,dwmac-3.70a",
				     "snps,dwmac";
			reg = <0x0 0xfdc00000 0x0 0x10000>,
			      <0x0 0xfe024000 0x0 0x8>;

			interrupts = <GIC_SPI 74 IRQ_TYPE_LEVEL_HIGH>;
			interrupt-names = "macirq";
			power-domains = <&pwrc PWRC_S4_ETH_ID>;
			clocks = <&clkc_periphs CLKID_ETH>,
				 <&clkc_pll CLKID_FCLK_DIV2>,
				 <&clkc_pll CLKID_MPLL2>;
			clock-names = "stmmaceth", "clkin0", "clkin1";
			rx-fifo-depth = <4096>;
			tx-fifo-depth = <2048>;
			status = "disabled";

			mdio0: mdio {
				#address-cells = <1>;
				#size-cells = <0>;
				compatible = "snps,dwmac-mdio";
			};
		};

		sdio: mmc@fe088000 {
			compatible = "amlogic,meson-axg-mmc";
			reg = <0x0 0xfe088000 0x0 0x800>;
			interrupts = <GIC_SPI 176 IRQ_TYPE_LEVEL_HIGH>;
			clocks = <&clkc_periphs CLKID_SDEMMC_A>,
				 <&xtal>,
				 <&clkc_pll CLKID_FCLK_DIV2>;
			clock-names = "core", "clkin0", "clkin1";
			resets = <&reset RESET_SD_EMMC_A>;
			cap-sdio-irq;
			keep-power-in-suspend;
			status = "disabled";
		};

		sd: mmc@fe08a000 {
			compatible = "amlogic,meson-axg-mmc";
			reg = <0x0 0xfe08a000 0x0 0x800>;
			interrupts = <GIC_SPI 177 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_periphs CLKID_SDEMMC_B>,
				 <&clkc_periphs CLKID_SD_EMMC_B>,
				 <&clkc_pll CLKID_FCLK_DIV2>;
			clock-names = "core", "clkin0", "clkin1";
			resets = <&reset RESET_SD_EMMC_B>;
			status = "disabled";
		};

		emmc: mmc@fe08c000 {
			compatible = "amlogic,meson-axg-mmc";
			reg = <0x0 0xfe08c000 0x0 0x800>;
			interrupts = <GIC_SPI 178 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_periphs CLKID_NAND>,
				 <&xtal>,
				 <&clkc_pll CLKID_FCLK_DIV2>;
			clock-names = "core", "clkin0", "clkin1";
			resets = <&reset RESET_NAND_EMMC>;
			no-sdio;
			no-sd;
			status = "disabled";
		};

		vpu: vpu@ff000000 {
			compatible = "amlogic,meson-s4-vpu";
			reg = <0x0 0xff000000 0x0 0x40000>,
				  <0x0 0xfe008000 0x0 0x2000>,
				  <0x0 0xfe000000 0x0 0x2000>,
				  <0x0 0xfe00c000 0x0 0x0800>,
				  <0x0 0xfe010000 0x0 0x0100>;
			reg-names = "vpu", "hhi", "clkctrl", "pwrctrl", "sysctrl";
			interrupts = <GIC_SPI 197 IRQ_TYPE_EDGE_RISING>;
			#address-cells = <1>;
			#size-cells = <0>;
			amlogic,canvas = <&canvas>;
			power-domains = <&pwrc PWRC_S4_VPU_HDMI_ID>;

			clocks = <&clkc_periphs CLKID_VPU>,
				 <&clkc_periphs CLKID_VAPB>;
			clock-names = "vpu", "vapb";

			/*
			 * VPU clocking is provided by two identical clock paths
			 * VPU_0 and VPU_1 muxed to a single clock by a glitch
			 * free mux to safely change frequency while running.
			 * Same for VAPB but with a final gate after the glitch free mux.
			 */
			assigned-clocks = <&clkc_periphs CLKID_VPU_0_SEL>,
					  <&clkc_periphs CLKID_VPU_0>,
					  <&clkc_periphs CLKID_VPU>, /* Glitch free mux */
					  <&clkc_periphs CLKID_VAPB_0_SEL>,
					  <&clkc_periphs CLKID_VAPB_0>,
					  <&clkc_periphs CLKID_VAPB>; /* Glitch free mux */
			assigned-clock-parents = <&clkc_periphs CLKID_FCLK_DIV3>,
						 <0>, /* Do Nothing */
						 <&clkc_periphs CLKID_VPU_0>,
						 <&clkc_periphs CLKID_FCLK_DIV4>,
						 <0>, /* Do Nothing */
						 <&clkc_periphs CLKID_VAPB_0>;
			assigned-clock-rates = <0>, /* Do Nothing */
					       <666666666>,
					       <0>, /* Do Nothing */
					       <0>, /* Do Nothing */
					       <250000000>,
					       <0>; /* Do Nothing */

			/* CVBS VDAC output port */
			cvbs_vdac_port: port@0 {
				reg = <0>;
			};

			/* HDMI-TX output port */
			hdmi_tx_port: port@1 {
				reg = <1>;

				hdmi_tx_out: endpoint {
					remote-endpoint = <&hdmi_tx_in>;
				};
			};
		};
	};
};

&apb4 {
	audio: bus@330000 {
		compatible = "simple-bus";
		reg = <0x0 0x330000 0x0 0x1000>;
		#address-cells = <2>;
		#size-cells = <2>;
		ranges = <0x0 0x0 0x0 0x330000 0x0 0x1000>;

		clkc_audio: clock-controller@0 {
			compatible = "amlogic,s4-audio-clkc";
			reg = <0x0 0x0 0x0 0xd8>,
			      <0x0 0xE80 0x0 0x10>;
			#clock-cells = <1>;
			#reset-cells = <1>;
			power-domains = <&pwrc PWRC_S4_AUDIO_ID>;
			clocks = <&clkc_periphs CLKID_AUDIO>,
				 <&clkc_pll CLKID_MPLL0>,
				 <&clkc_pll CLKID_MPLL1>,
				 <&clkc_pll CLKID_MPLL2>,
				 <&clkc_pll CLKID_MPLL3>,
				 <&clkc_pll CLKID_HIFI_PLL>,
				 <&clkc_pll CLKID_FCLK_DIV3>,
				 <&clkc_pll CLKID_FCLK_DIV4>,
				 <&clkc_pll CLKID_FCLK_DIV5>;
			clock-names = "pclk",
				      "mst_in0",
				      "mst_in1",
				      "mst_in2",
				      "mst_in3",
				      "mst_in4",
				      "mst_in5",
				      "mst_in6",
				      "mst_in7";

			resets = <&reset RESET_AUDIO>;
		};

		toddr_a: audio-controller@100 {
			compatible = "amlogic,sm1-toddr",
				     "amlogic,axg-toddr";
			reg = <0x0 0x100 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "TODDR_A";
			interrupts = <GIC_SPI 32 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_TODDR_A>;
			resets = <&arb AXG_ARB_TODDR_A>,
				 <&clkc_audio AUD_RESET_TODDR_A>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <8192>;
		};

		toddr_b: audio-controller@140 {
			compatible = "amlogic,sm1-toddr",
				     "amlogic,axg-toddr";
			reg = <0x0 0x140 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "TODDR_B";
			interrupts = <GIC_SPI 33 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_TODDR_B>;
			resets = <&arb AXG_ARB_TODDR_B>,
				 <&clkc_audio AUD_RESET_TODDR_B>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <256>;
		};

		toddr_c: audio-controller@180 {
			compatible = "amlogic,sm1-toddr",
				     "amlogic,axg-toddr";
			reg = <0x0 0x180 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "TODDR_C";
			interrupts = <GIC_SPI 34 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_TODDR_C>;
			resets = <&arb AXG_ARB_TODDR_C>,
				 <&clkc_audio AUD_RESET_TODDR_C>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <256>;
		};

		frddr_a: audio-controller@1c0 {
			compatible = "amlogic,sm1-frddr",
				     "amlogic,axg-frddr";
			reg = <0x0 0x1c0 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "FRDDR_A";
			interrupts = <GIC_SPI 36 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_FRDDR_A>;
			resets = <&arb AXG_ARB_FRDDR_A>,
				 <&clkc_audio AUD_RESET_FRDDR_A>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <512>;
		};

		frddr_b: audio-controller@200 {
			compatible = "amlogic,sm1-frddr",
				     "amlogic,axg-frddr";
			reg = <0x0 0x200 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "FRDDR_B";
			interrupts = <GIC_SPI 37 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_FRDDR_B>;
			resets = <&arb AXG_ARB_FRDDR_B>,
				 <&clkc_audio AUD_RESET_FRDDR_B>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <256>;
		};

		frddr_c: audio-controller@240 {
			compatible = "amlogic,sm1-frddr",
				     "amlogic,axg-frddr";
			reg = <0x0 0x240 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "FRDDR_C";
			interrupts = <GIC_SPI 38 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_FRDDR_C>;
			resets = <&arb AXG_ARB_FRDDR_C>,
				 <&clkc_audio AUD_RESET_FRDDR_C>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <256>;
		};

		arb: reset-controller@280 {
			compatible = "amlogic,meson-sm1-audio-arb";
			reg = <0x0 0x280 0x0 0x4>;
			#reset-cells = <1>;
			clocks = <&clkc_audio AUD_CLKID_DDR_ARB>;
		};

		tdmin_a: audio-controller@300 {
			compatible = "amlogic,sm1-tdmin";
			reg = <0x0 0x300 0x0 0x40>;
			sound-name-prefix = "TDMIN_A";
			resets = <&clkc_audio AUD_RESET_TDMIN_A>;
			clocks = <&clkc_audio AUD_CLKID_TDMIN_A>,
				 <&clkc_audio AUD_CLKID_TDMIN_A_SCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_A_SCLK_SEL>,
				 <&clkc_audio AUD_CLKID_TDMIN_A_LRCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_A_LRCLK>;
			clock-names = "pclk", "sclk", "sclk_sel",
				      "lrclk", "lrclk_sel";
		};

		tdmin_b: audio-controller@340 {
			compatible = "amlogic,sm1-tdmin";
			reg = <0x0 0x340 0x0 0x40>;
			sound-name-prefix = "TDMIN_B";
			resets = <&clkc_audio AUD_RESET_TDMIN_B>;
			clocks = <&clkc_audio AUD_CLKID_TDMIN_B>,
				 <&clkc_audio AUD_CLKID_TDMIN_B_SCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_B_SCLK_SEL>,
				 <&clkc_audio AUD_CLKID_TDMIN_B_LRCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_B_LRCLK>;
			clock-names = "pclk", "sclk", "sclk_sel",
				      "lrclk", "lrclk_sel";
		};

		tdmin_c: audio-controller@380 {
			compatible = "amlogic,sm1-tdmin";
			reg = <0x0 0x380 0x0 0x40>;
			sound-name-prefix = "TDMIN_C";
			resets = <&clkc_audio AUD_RESET_TDMIN_C>;
			clocks = <&clkc_audio AUD_CLKID_TDMIN_C>,
				 <&clkc_audio AUD_CLKID_TDMIN_C_SCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_C_SCLK_SEL>,
				 <&clkc_audio AUD_CLKID_TDMIN_C_LRCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_C_LRCLK>;
			clock-names = "pclk", "sclk", "sclk_sel",
				      "lrclk", "lrclk_sel";
		};

		tdmin_lb: audio-controller@3c0 {
			compatible = "amlogic,sm1-tdmin";
			reg = <0x0 0x3c0 0x0 0x40>;
			sound-name-prefix = "TDMIN_LB";
			resets = <&clkc_audio AUD_RESET_TDMIN_LB>;
			clocks = <&clkc_audio AUD_CLKID_TDMIN_LB>,
				 <&clkc_audio AUD_CLKID_TDMIN_LB_SCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_LB_SCLK_SEL>,
				 <&clkc_audio AUD_CLKID_TDMIN_LB_LRCLK>,
				 <&clkc_audio AUD_CLKID_TDMIN_LB_LRCLK>;
			clock-names = "pclk", "sclk", "sclk_sel",
				      "lrclk", "lrclk_sel";
		};

		spdifin: audio-controller@400 {
			compatible = "amlogic,g12a-spdifin",
				     "amlogic,axg-spdifin";
			reg = <0x0 0x400 0x0 0x30>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "SPDIFIN";
			interrupts = <GIC_SPI 151 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_SPDIFIN>,
			<&clkc_audio AUD_CLKID_SPDIFIN_CLK>;
			clock-names = "pclk", "refclk";
			resets = <&clkc_audio AUD_RESET_SPDIFIN>;
		};

		spdifout_a: audio-controller@480 {
			compatible = "amlogic,g12a-spdifout",
				     "amlogic,axg-spdifout";
			reg = <0x0 0x480 0x0 0x50>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "SPDIFOUT_A";
			clocks = <&clkc_audio AUD_CLKID_SPDIFOUT>,
			<&clkc_audio AUD_CLKID_SPDIFOUT_CLK>;
			clock-names = "pclk", "mclk";
			resets = <&clkc_audio AUD_RESET_SPDIFOUT>;
		};

		tdmout_a: audio-controller@500 {
			compatible = "amlogic,sm1-tdmout";
			reg = <0x0 0x500 0x0 0x40>;
			sound-name-prefix = "TDMOUT_A";
			resets = <&clkc_audio AUD_RESET_TDMOUT_A>;
			clocks = <&clkc_audio AUD_CLKID_TDMOUT_A>,
				 <&clkc_audio AUD_CLKID_TDMOUT_A_SCLK>,
				 <&clkc_audio AUD_CLKID_TDMOUT_A_SCLK_SEL>,
				 <&clkc_audio AUD_CLKID_TDMOUT_A_LRCLK>,
				 <&clkc_audio AUD_CLKID_TDMOUT_A_LRCLK>;
			clock-names = "pclk", "sclk", "sclk_sel",
				      "lrclk", "lrclk_sel";
		};

		tdmout_b: audio-controller@540 {
			compatible = "amlogic,sm1-tdmout";
			reg = <0x0 0x540 0x0 0x40>;
			sound-name-prefix = "TDMOUT_B";
			resets = <&clkc_audio AUD_RESET_TDMOUT_B>;
			clocks = <&clkc_audio AUD_CLKID_TDMOUT_B>,
				 <&clkc_audio AUD_CLKID_TDMOUT_B_SCLK>,
				 <&clkc_audio AUD_CLKID_TDMOUT_B_SCLK_SEL>,
				 <&clkc_audio AUD_CLKID_TDMOUT_B_LRCLK>,
				 <&clkc_audio AUD_CLKID_TDMOUT_B_LRCLK>;
			clock-names = "pclk", "sclk", "sclk_sel",
				      "lrclk", "lrclk_sel";
		};

		tdmout_c: audio-controller@580 {
			compatible = "amlogic,sm1-tdmout";
			reg = <0x0 0x580 0x0 0x40>;
			sound-name-prefix = "TDMOUT_C";
			resets = <&clkc_audio AUD_RESET_TDMOUT_C>;
			clocks = <&clkc_audio AUD_CLKID_TDMOUT_C>,
				 <&clkc_audio AUD_CLKID_TDMOUT_C_SCLK>,
				 <&clkc_audio AUD_CLKID_TDMOUT_C_SCLK_SEL>,
				 <&clkc_audio AUD_CLKID_TDMOUT_C_LRCLK>,
				 <&clkc_audio AUD_CLKID_TDMOUT_C_LRCLK>;
			clock-names = "pclk", "sclk", "sclk_sel",
				      "lrclk", "lrclk_sel";
		};

		spdifout_b: audio-controller@680 {
			compatible = "amlogic,g12a-spdifout",
				     "amlogic,axg-spdifout";
			reg = <0x0 0x680 0x0 0x50>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "SPDIFOUT_B";
			clocks = <&clkc_audio AUD_CLKID_SPDIFOUT_B>,
				 <&clkc_audio AUD_CLKID_SPDIFOUT_B_CLK>;
			clock-names = "pclk", "mclk";
			resets = <&clkc_audio AUD_RESET_SPDIFOUT_B>;
		};

		toacodec: audio-controller@740 {
			compatible = "amlogic,s4-toacodec",
				     "amlogic,g12a-toacodec";
			reg = <0x0 0x740 0x0 0x4>;
			sound-name-prefix = "TOACODEC";
			#sound-dai-cells = <1>;
			resets = <&clkc_audio AUD_RESET_TOACODEC>;
		};

		tohdmitx: audio-controller@744 {
			compatible = "amlogic,sm1-tohdmitx",
				     "amlogic,g12a-tohdmitx";
			reg = <0x0 0x744 0x0 0x4>;
			#sound-dai-cells = <1>;
			sound-name-prefix = "TOHDMITX";
			resets = <&clkc_audio AUD_RESET_TOHDMITX>;
		};

		toddr_d: audio-controller@840 {
			compatible = "amlogic,sm1-toddr",
				     "amlogic,axg-toddr";
			reg = <0x0 0x840 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "TODDR_D";
			interrupts = <GIC_SPI 45 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_TODDR_D>;
			resets = <&arb AXG_ARB_TODDR_D>,
				 <&clkc_audio AUD_RESET_TODDR_D>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <256>;
		};

		frddr_d: audio-controller@880 {
			 compatible = "amlogic,sm1-frddr",
				      "amlogic,axg-frddr";
			reg = <0x0 0x880 0x0 0x2c>;
			#sound-dai-cells = <0>;
			sound-name-prefix = "FRDDR_D";
			interrupts = <GIC_SPI 46 IRQ_TYPE_EDGE_RISING>;
			clocks = <&clkc_audio AUD_CLKID_FRDDR_D>;
			resets = <&arb AXG_ARB_FRDDR_D>,
				 <&clkc_audio AUD_RESET_FRDDR_D>;
			reset-names = "arb", "rst";
			amlogic,fifo-depth = <256>;
		};
	};

	pdm: audio-controller@331000 {
		compatible = "amlogic,sm1-pdm",
			     "amlogic,axg-pdm";
		reg = <0x0 0x331000 0x0 0x34>;
		#sound-dai-cells = <0>;
		sound-name-prefix = "PDM";
		clocks = <&clkc_audio AUD_CLKID_PDM>,
			 <&clkc_audio AUD_CLKID_PDM_DCLK>,
			 <&clkc_audio AUD_CLKID_PDM_SYSCLK>;
		clock-names = "pclk", "dclk", "sysclk";
		resets = <&clkc_audio AUD_RESET_PDM>;
	};
};
